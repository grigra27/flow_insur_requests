# HTTPS Deployment –£—Å–ø–µ—à–µ–Ω! üéâ

## ‚úÖ –û—Ç–ª–∏—á–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å!

**Deployment —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç HTTPS!**

–ò–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ª–æ–≥–∞ –≤–∏–¥–Ω–æ:
- ‚úÖ **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –Ω–∞–π–¥–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**
- ‚úÖ **HTTPS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞**
- ‚úÖ **Nginx –∑–∞–ø—É—â–µ–Ω —Å SSL –ø—Ä–æ—Ñ–∏–ª–µ–º**
- ‚úÖ **Web –∏ DB –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–¥–æ—Ä–æ–≤—ã**

## üîß –ù–µ–±–æ–ª—å—à–∞—è –ø—Ä–æ–±–ª–µ–º–∞:

Health check –Ω–µ –ø—Ä–æ—à–µ–ª –∏–∑-–∑–∞ SSL handshake timeout - nginx –µ—â–µ –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ HTTPS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º.

## ‚ö° –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh user@80.90.189.37

# –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø—Ä–æ–µ–∫—Ç
cd /opt/insflow-system

# –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π deployment
bash scripts/ssl/fix-deployment-https.sh
```

## üéØ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### 1. Simple Health Check
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ HTTPS** - —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–±—É–µ—Ç HTTP –∏ HTTPS
- **–û—Ç–∫–ª—é—á–µ–Ω–∞ SSL –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è** –¥–ª—è localhost
- **–£–≤–µ–ª–∏—á–µ–Ω timeout** –¥–ª—è HTTPS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

### 2. Certbot –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞** - –±–æ–ª—å—à–µ –Ω–µ –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ
- **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
- **–£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

### 3. Deployment –ø—Ä–æ—Ü–µ—Å—Å
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ SSL** ‚úÖ - —Ä–∞–±–æ—Ç–∞–µ—Ç!
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è HTTPS** ‚úÖ - —Ä–∞–±–æ—Ç–∞–µ—Ç!
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** ‚úÖ - —Ä–∞–±–æ—Ç–∞–µ—Ç!

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ:
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤**
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è HTTPS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
- **Nginx –∑–∞–ø—É—â–µ–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏**
- **–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–¥–æ—Ä–æ–≤—ã**

### üîß –ß—Ç–æ –Ω—É–∂–Ω–æ –ø–æ–¥–æ–∂–¥–∞—Ç—å:
- **Nginx –ø–æ–ª–Ω–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å** - –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è 1-2 –º–∏–Ω—É—Ç—ã
- **SSL handshake —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è** - nginx –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç SSL —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

## üåê –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

–í—Å–µ –¥–æ–º–µ–Ω—ã –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ HTTPS:
- https://insflow.ru
- https://zs.insflow.ru
- https://insflow.tw1.su
- https://zs.insflow.tw1.su

## üéâ –ì–ª–∞–≤–Ω–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ:

**Deployment –ø—Ä–æ—Ü–µ—Å—Å —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!**

- ‚úÖ –û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç HTTPS
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –º–µ–∂–¥—É deployments
- ‚úÖ –ù–µ –ø–∞–¥–∞–µ—Ç –≤ fallback —Ä–µ–∂–∏–º –±–µ–∑ –ø—Ä–∏—á–∏–Ω—ã

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ deployments:

–¢–µ–ø–µ—Ä—å –∫–∞–∂–¥—ã–π –Ω–æ–≤—ã–π deployment –±—É–¥–µ—Ç:
1. **–ü—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤**
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å HTTPS** –µ—Å–ª–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –µ—Å—Ç—å
3. **–°–æ—Ö—Ä–∞–Ω—è—Ç—å HTTPS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é**
4. **–†–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ** –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞

**–ú–∏—Å—Å–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!** –°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏! üéØ