# Контрольный список развертывания системы управления страховыми заявками

## Предварительная подготовка

### Системные требования
- [ ] Проверена версия Python (>= 3.8)
- [ ] Установлен pip3
- [ ] Установлен Git
- [ ] Проверено свободное место на диске (минимум 10 GB)
- [ ] Проверена доступность RAM (минимум 2 GB)

### Подготовка окружения
- [ ] Создано виртуальное окружение
- [ ] Активировано виртуальное окружение
- [ ] Обновлен pip до последней версии
- [ ] Клонирован репозиторий проекта
- [ ] Создан файл .env из .env.example

### База данных
- [ ] Установлена база данных (SQLite для разработки / PostgreSQL для продакшена)
- [ ] Настроены права доступа к базе данных
- [ ] Проверено подключение к базе данных
- [ ] Настроены параметры подключения в .env

## Установка и настройка

### Зависимости
- [ ] Установлены Python пакеты из requirements.txt
- [ ] Проверена установка Django
- [ ] Проверена установка openpyxl и pandas
- [ ] Проверены все критически важные пакеты

### Конфигурация Django
- [ ] Настроены ALLOWED_HOSTS
- [ ] Настроен SECRET_KEY
- [ ] Настроены параметры базы данных
- [ ] Настроены параметры email (если требуется)
- [ ] Настроены параметры логирования
- [ ] Добавлен AuthenticationMiddleware в MIDDLEWARE

### Миграции базы данных
- [ ] Созданы миграции для insurance_requests
- [ ] Созданы миграции для summaries (если используется)
- [ ] Применены все миграции Django
- [ ] Запущен кастомный скрипт миграции данных
- [ ] Проверена целостность данных после миграции

## Настройка аутентификации

### Группы пользователей
- [ ] Создана группа "Администраторы"
- [ ] Создана группа "Пользователи"
- [ ] Настроены разрешения для группы администраторов
- [ ] Настроены разрешения для группы пользователей
- [ ] Проверено создание групп в базе данных

### Пользователи по умолчанию
- [ ] Создан пользователь admin с паролем admin123
- [ ] Создан пользователь user с паролем user123
- [ ] Пользователь admin добавлен в группу "Администраторы"
- [ ] Пользователь user добавлен в группу "Пользователи"
- [ ] Проверены права доступа пользователей

### Middleware и декораторы
- [ ] Добавлен AuthenticationMiddleware в settings.py
- [ ] Настроены URL для входа и выхода
- [ ] Проверена работа декораторов доступа
- [ ] Настроена страница "Доступ запрещен"

## Новые функции

### Новый тип страхования
- [ ] Добавлен тип "страхование имущества" в модель
- [ ] Обновлена логика определения типа в ExcelReader
- [ ] Обновлены формы для нового типа
- [ ] Проверена работа с новым типом в интерфейсе

### Улучшенные шаблоны писем
- [ ] Создан маппинг расширенных описаний типов
- [ ] Обновлен EmailTemplateGenerator
- [ ] Проверены описания для всех типов страхования
- [ ] Протестирована генерация писем

### Отдельные поля дат
- [ ] Добавлены поля insurance_start_date и insurance_end_date
- [ ] Обновлены формы для работы с отдельными датами
- [ ] Добавлена валидация дат в формах
- [ ] Обновлены шаблоны для отображения дат
- [ ] Мигрированы существующие данные периодов

### Интерфейс входа
- [ ] Создан шаблон login.html
- [ ] Создан CSS файл login.css
- [ ] Настроена маршрутизация для входа/выхода
- [ ] Проверена адаптивность дизайна
- [ ] Протестирована обработка ошибок

## Статические файлы и медиа

### Статические файлы
- [ ] Настроены STATIC_URL и STATIC_ROOT
- [ ] Собраны статические файлы командой collectstatic
- [ ] Проверена доступность CSS файлов
- [ ] Проверена доступность JavaScript файлов
- [ ] Настроены права доступа к статическим файлам

### Медиа файлы
- [ ] Настроены MEDIA_URL и MEDIA_ROOT
- [ ] Созданы директории для загрузок
- [ ] Настроены права доступа к медиа файлам
- [ ] Проверена загрузка Excel файлов

## Тестирование

### Автоматические тесты
- [ ] Запущены тесты аутентификации (test_authentication_system)
- [ ] Запущены тесты интерфейса входа (test_login_interface)
- [ ] Запущены тесты улучшений форм (test_form_enhancements)
- [ ] Запущены тесты улучшенных писем (test_enhanced_email_templates)
- [ ] Запущены тесты нового типа страхования (test_new_insurance_type)
- [ ] Запущены end-to-end тесты (test_end_to_end_workflow)
- [ ] Запущены тесты производительности (test_performance_and_security)
- [ ] Все тесты прошли успешно

### Ручное тестирование
- [ ] Проверен вход в систему с учетными данными admin
- [ ] Проверен вход в систему с учетными данными user
- [ ] Проверена работа перенаправлений при отсутствии аутентификации
- [ ] Проверена работа выхода из системы
- [ ] Протестированы права доступа для разных ролей

### Функциональное тестирование
- [ ] Создана заявка с новым типом "страхование имущества"
- [ ] Отредактированы даты страхования в форме
- [ ] Проверена валидация дат (начальная не позже конечной)
- [ ] Сгенерированы письма для всех типов страхования
- [ ] Проверены расширенные описания в письмах
- [ ] Проверен новый формат дат в письмах

## Настройка для продакшена (если применимо)

### Безопасность
- [ ] Установлен DEBUG = False
- [ ] Настроены ALLOWED_HOSTS
- [ ] Настроены параметры SSL
- [ ] Настроены заголовки безопасности
- [ ] Настроены безопасные cookies

### Веб-сервер
- [ ] Установлен и настроен Nginx
- [ ] Настроен SSL сертификат
- [ ] Настроена конфигурация для статических файлов
- [ ] Настроена конфигурация для медиа файлов
- [ ] Проверена работа gzip сжатия

### WSGI сервер
- [ ] Установлен Gunicorn
- [ ] Создан файл конфигурации gunicorn.conf.py
- [ ] Настроен systemd сервис
- [ ] Проверен запуск и перезапуск сервиса

### База данных (продакшен)
- [ ] Установлен PostgreSQL
- [ ] Создана база данных и пользователь
- [ ] Настроены права доступа
- [ ] Настроено подключение пулов
- [ ] Настроено резервное копирование

## Мониторинг и обслуживание

### Логирование
- [ ] Настроены файлы логов Django
- [ ] Настроены файлы логов аутентификации
- [ ] Настроена ротация логов
- [ ] Проверена запись логов

### Резервное копирование
- [ ] Создан скрипт резервного копирования базы данных
- [ ] Создан скрипт резервного копирования медиа файлов
- [ ] Настроено автоматическое резервное копирование (cron)
- [ ] Проверена возможность восстановления из бэкапа

### Мониторинг
- [ ] Настроен мониторинг доступности сервисов
- [ ] Настроен мониторинг использования ресурсов
- [ ] Настроены уведомления о проблемах
- [ ] Создан скрипт проверки состояния системы

## Документация

### Пользовательская документация
- [ ] Обновлено руководство пользователя
- [ ] Создана документация по новым функциям
- [ ] Документированы учетные записи по умолчанию
- [ ] Создан FAQ по частым вопросам

### Техническая документация
- [ ] Обновлены инструкции по развертыванию
- [ ] Документированы новые настройки
- [ ] Создан план восстановления после сбоев
- [ ] Документированы процедуры обслуживания

## Финальная проверка

### Доступность системы
- [ ] Система доступна по основному URL
- [ ] Страница входа загружается корректно
- [ ] Все статические файлы загружаются
- [ ] Нет ошибок в логах

### Функциональность
- [ ] Аутентификация работает корректно
- [ ] Все основные функции доступны
- [ ] Новые функции работают как ожидается
- [ ] Производительность соответствует требованиям

### Безопасность
- [ ] Неавторизованные пользователи не имеют доступа
- [ ] Права доступа работают корректно
- [ ] SSL настроен правильно (для продакшена)
- [ ] Нет уязвимостей безопасности

## Передача в эксплуатацию

### Обучение пользователей
- [ ] Проведено обучение администраторов
- [ ] Проведено обучение обычных пользователей
- [ ] Предоставлена документация пользователям
- [ ] Настроена техническая поддержка

### Поддержка
- [ ] Настроены каналы связи для поддержки
- [ ] Подготовлены процедуры для решения проблем
- [ ] Настроено отслеживание инцидентов
- [ ] Подготовлен план обновлений

## Подписи

**Разработчик**: _________________ Дата: _________

**Системный администратор**: _________________ Дата: _________

**Руководитель проекта**: _________________ Дата: _________

**Заказчик**: _________________ Дата: _________

---

**Примечания**:
- Все пункты должны быть отмечены перед передачей системы в эксплуатацию
- При обнаружении проблем необходимо их устранить и повторно проверить соответствующие пункты
- Данный чеклист должен быть сохранен как часть документации проекта

**Версия чеклиста**: 1.0  
**Дата создания**: $(date +%d.%m.%Y)