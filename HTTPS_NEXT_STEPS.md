# –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è HTTPS

## ‚úÖ –ß—Ç–æ —É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

1. **HTTP —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ** - –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞—é—Ç
2. **–°–æ–∑–¥–∞–Ω Docker-based SSL —Å–∫—Ä–∏–ø—Ç** - `scripts/ssl/obtain-certificates-docker.sh`
3. **–û–±–Ω–æ–≤–ª–µ–Ω deployment –ø—Ä–æ—Ü–µ—Å—Å** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
4. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ bind mounts –¥–ª—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–ª—è HTTPS:

### 1. DNS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–ö–†–ò–¢–ò–ß–ù–û)
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –¥–æ–º–µ–Ω—ã —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ IP —Å–µ—Ä–≤–µ—Ä–∞ `80.90.189.37`:
```bash
nslookup insflow.ru
nslookup zs.insflow.ru  
nslookup insflow.tw1.su
nslookup zs.insflow.tw1.su
```

### 2. –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–æ–º–µ–Ω–æ–≤ –ø–æ HTTP
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –¥–æ–º–µ–Ω—ã –æ—Ç–≤–µ—á–∞—é—Ç –ø–æ HTTP:
```bash
curl -I http://insflow.ru/
curl -I http://zs.insflow.ru/
curl -I http://insflow.tw1.su/
curl -I http://zs.insflow.tw1.su/
```

### 3. –ü–æ—Ä—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞
–£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –ø–æ—Ä—Ç—ã 80 –∏ 443 –æ—Ç–∫—Ä—ã—Ç—ã –≤ firewall

## üöÄ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å HTTPS:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (—Å–ª–µ–¥—É—é—â–∏–π deployment)
–ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—ã–π deployment - —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ø—Ä–æ–±—É–µ—Ç –ø–æ–ª—É—á–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh user@80.90.189.37

# –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø—Ä–æ–µ–∫—Ç  
cd /opt/insflow-system

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
bash scripts/ssl/obtain-certificates-docker.sh

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
ls -la letsencrypt/live/
```

## üìã –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

–ï—Å–ª–∏ DNS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏ –¥–æ–º–µ–Ω—ã –¥–æ—Å—Ç—É–ø–Ω—ã:
1. ‚úÖ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –±—É–¥—É—Ç –ø–æ–ª—É—á–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
2. ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ HTTPS —Ä–µ–∂–∏–º
3. ‚úÖ –í—Å–µ –¥–æ–º–µ–Ω—ã –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ HTTPS
4. ‚úÖ HTTP –±—É–¥–µ—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞ HTTPS

## ‚ùå –ï—Å–ª–∏ HTTPS –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏**: `cat ssl-generation.log`
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å DNS**: —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –¥–æ–º–µ–Ω—ã —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å**: –¥–æ–º–µ–Ω—ã –¥–æ–ª–∂–Ω—ã –æ—Ç–≤–µ—á–∞—Ç—å –ø–æ HTTP
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç—ã**: 80 –∏ 443 –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã

## üîÑ Fallback —Ä–µ–∂–∏–º:

–ï—Å–ª–∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –Ω–µ —É–¥–∞–µ—Ç—Å—è:
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –≤ HTTP-only —Ä–µ–∂–∏–º
- –í—Å–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Å–µ–π—á–∞—Å
- –ú–æ–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É –ø–æ–∑–∂–µ –∫–æ–≥–¥–∞ DNS –±—É–¥–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω

## üìû –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å DNS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** —É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –¥–æ–º–µ–Ω–æ–≤
2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—ã–π deployment** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è SSL
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç** –≤ –ª–æ–≥–∞—Ö deployment
4. **–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏** - —Ä—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ